import {join} from "path";
import {readFileSync} from "fs";
import {envs} from "./envs";
import loggerConfig from "./logger";{{#if mongoose}}
import mongooseConfig from "./mongoose";
{{/if}}{{#if typeorm}}
import typeormConfig from "./typeorm";
{{/if}}{{#if oidc}}
import oidcConfig from "./oidc";
import {FileSyncAdapter} from "@tsed/adapters";
{{/if}}

const pkg = JSON.parse(readFileSync("./package.json", {encoding: "utf8"}));

export const config: Partial<TsED.Configuration> = {
  version: pkg.version,
  envs,
  logger: loggerConfig,
  {{#if typeorm}}
  typeorm: typeormConfig,
  {{/if}}
  {{#if mongoose}}
  mongoose: mongooseConfig,
  {{/if}}
  {{#if graphql}}
  graphql: {
    default: {
      path: "/graphql",
        buildSchemaOptions: {
      }
    }
  }
  {{/if}}
  {{#if oidc}}
  oidc: oidcConfig,
  adapters: [
    FileSyncAdapter
  ]
  {{/if}}
  // additional shared configuration
};
